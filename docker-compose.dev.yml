# Development environment override.
# Usage: docker compose -f docker-compose.yml -f docker-compose.dev.yml up -d

services:
  app-dev:
    build:
      context: .
      dockerfile: Dockerfile
    restart: unless-stopped
    depends_on:
      postgres:
        condition: service_healthy
    environment:
      APP_ENV: dev
      DATABASE_URL: postgresql://ahlt:${POSTGRES_PASSWORD:-ahlt_dev_pass}@postgres/ahlt_dev
      NEO4J_URI: bolt://neo4j:7687
      NEO4J_USER: neo4j
      NEO4J_PASSWORD: ${NEO4J_PASSWORD:-secretpass}
      HOST: 0.0.0.0
      PORT: 8080
      RUST_LOG: info,ahlt=debug
      COOKIE_SECURE: "false"
    ports:
      - "8080:8080"
