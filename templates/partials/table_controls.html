{# templates/partials/table_controls.html #}
{# Controls bar: per-page selector, result count, column picker button, export link #}

<div class="table-controls">
    <div class="table-controls__left">
        <div class="table-controls__per-page">
            <label for="per-page-select" class="sr-only">Rows per page</label>
            <select id="per-page-select" class="table-controls__select" onchange="changePerPage(this.value)">
                <option value="10" {% if user_page.per_page == 10 %}selected{% endif %}>10 rows</option>
                <option value="25" {% if user_page.per_page == 25 %}selected{% endif %}>25 rows</option>
                <option value="50" {% if user_page.per_page == 50 %}selected{% endif %}>50 rows</option>
                <option value="100" {% if user_page.per_page == 100 %}selected{% endif %}>100 rows</option>
            </select>
        </div>
    </div>
    <div class="table-controls__right">
        <div class="table-controls__summary">
            Showing <strong>{{ user_page.users.len() }}</strong> of <strong>{{ user_page.total_count }}</strong> users
        </div>
        <button type="button" class="btn btn-sm" id="col-picker-btn">&#8862; Columns</button>
        <a href="/users/export.csv?filter={{ filter_json }}&sort={{ sort_column }}&dir={{ sort_dir }}"
           class="btn btn-sm" target="_blank">&#8595; Export CSV</a>
    </div>
</div>

<script>
function changePerPage(n) {
    const url = new URL(window.location.href);
    url.searchParams.set('per_page', n);
    url.searchParams.set('page', '1');
    window.location.href = url.toString();
}
</script>
