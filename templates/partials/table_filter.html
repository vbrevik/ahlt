{# templates/partials/table_filter.html #}
{# Receives from parent: filter_json, fields_json, sort_column, sort_dir, user_page #}
<div class="filter-builder" id="filter-builder">
    <div class="filter-builder__header">
        <span class="filter-builder__title">Filters</span>
        <div class="filter-builder__root-logic">
            Match
            <select class="filter-logic-select" id="root-logic-select">
                <option value="and">ALL</option>
                <option value="or">ANY</option>
            </select>
            of the following
        </div>
        <div class="filter-builder__header-actions">
            <button type="button" class="btn btn-sm" id="add-root-condition">+ Condition</button>
            <button type="button" class="btn btn-sm" id="add-group">+ Group</button>
        </div>
    </div>

    <div class="filter-builder__conditions" id="root-conditions"></div>
    <div class="filter-builder__groups" id="root-groups"></div>

    <div class="filter-builder__footer">
        <a href="/users" class="btn btn-sm">Clear</a>
        <button type="button" class="btn btn-sm btn-primary" id="apply-filter">Apply &#9658;</button>
    </div>
</div>

{# Hidden form that GET-submits with serialized filter #}
<form method="get" action="/users" id="filter-form" style="display:none">
    <input type="hidden" name="filter" id="filter-json-input">
    <input type="hidden" name="sort" value="{{ sort_column }}">
    <input type="hidden" name="dir" value="{{ sort_dir }}">
    <input type="hidden" name="per_page" value="{{ user_page.per_page }}">
</form>

<script src="/static/js/filter-builder.js"></script>
