{% extends "base.html" %}

{% block title %}Ontology — Concepts — {{ ctx.app_name }}{% endblock %}

{% block nav %}
{% include "partials/nav.html" %}
{% endblock %}

{% block sidebar %}
{% include "partials/sidebar.html" %}
{% endblock %}

{% block content %}
<div class="ontology-header">
    <div class="page-header">
        <h1>Ontology Explorer</h1>
    </div>
    <nav class="tab-bar">
        <a href="/ontology" class="tab active">Concepts</a>
        <a href="/ontology/data" class="tab">Data</a>
        <a href="/ontology/reference" class="tab">Reference</a>
    </nav>
</div>

<div class="graph-container">
    <div class="graph-toolbar" id="graph-toolbar">
        <button class="btn-icon" id="btn-fit" title="Fit all (F)">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 3h6v6"/><path d="M9 21H3v-6"/><path d="M21 3l-7 7"/><path d="M3 21l7-7"/></svg>
        </button>
        <button class="btn-icon" id="btn-zoom-in" title="Zoom in (+)">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/><line x1="11" y1="8" x2="11" y2="14"/><line x1="8" y1="11" x2="14" y2="11"/></svg>
        </button>
        <button class="btn-icon" id="btn-zoom-out" title="Zoom out (-)">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/><line x1="8" y1="11" x2="14" y2="11"/></svg>
        </button>
        <div class="toolbar-divider"></div>
        <button class="btn-icon" id="btn-reset" title="Reset zoom (0)">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg>
        </button>
        <button class="btn-icon" id="btn-lock" title="Lock positions (L)">
            <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><rect x="3" y="11" width="18" height="11" rx="2" ry="2"/><path d="M7 11V7a5 5 0 0 1 10 0v4"/></svg>
        </button>
        <div class="toolbar-spacer"></div>
        <span class="toolbar-stat" id="toolbar-stat"></span>
    </div>
    <div class="graph-canvas" id="graph-canvas">
        <div class="graph-loading" id="graph-loading">
            <span>Loading schema&hellip;</span>
        </div>
    </div>
    <div class="graph-detail" id="graph-detail" style="display: none;">
        <div class="detail-header">
            <span class="detail-type" id="detail-type"></span>
            <button class="btn-icon" id="btn-close-detail" title="Close">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><line x1="18" y1="6" x2="6" y2="18"/><line x1="6" y1="6" x2="18" y2="18"/></svg>
            </button>
        </div>
        <h3 id="detail-label"></h3>
        <p class="detail-meta" id="detail-meta"></p>
        <div class="detail-props" id="detail-props"></div>
        <div class="detail-connections" id="detail-connections"></div>
    </div>
</div>

{% include "ontology/partials/graph_js.html" %}
{% endblock %}
