{% if let Some(msg) = ctx.flash %}
<div class="alert alert-success">{{ msg }}</div>
{% endif %}

<div class="page-header">
    <div>
        <a href="/workflow/builder" style="font-size: 0.8125rem; color: var(--text-muted); text-decoration: none;">&larr; All Workflows</a>
        <h1 style="text-transform: capitalize; margin-top: 0.25rem;">{{ scope }} Workflow</h1>
    </div>
</div>

<!-- ============ STATE MACHINE GRAPH ============ -->
{% if !statuses.is_empty() %}
<div class="graph-panel">
    <div class="graph-panel-header">
        <h2>State Machine</h2>
        <span class="graph-panel-stat" id="wfb-graph-stat"></span>
    </div>
    <div class="graph-container" style="height:400px; border:none; border-radius:0;">
        <div class="graph-toolbar" id="wfb-toolbar">
            <button class="btn-icon" id="wfb-btn-fit" title="Fit all (F)">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M15 3h6v6"/><path d="M9 21H3v-6"/><path d="M21 3l-7 7"/><path d="M3 21l7-7"/></svg>
            </button>
            <button class="btn-icon" id="wfb-btn-zoom-in" title="Zoom in (+)">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/><line x1="11" y1="8" x2="11" y2="14"/><line x1="8" y1="11" x2="14" y2="11"/></svg>
            </button>
            <button class="btn-icon" id="wfb-btn-zoom-out" title="Zoom out (-)">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="11" cy="11" r="8"/><line x1="21" y1="21" x2="16.65" y2="16.65"/><line x1="8" y1="11" x2="14" y2="11"/></svg>
            </button>
            <div class="toolbar-divider"></div>
            <button class="btn-icon" id="wfb-btn-reset" title="Reset zoom (0)">
                <svg width="14" height="14" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M3 12a9 9 0 1 0 9-9 9.75 9.75 0 0 0-6.74 2.74L3 8"/><path d="M3 3v5h5"/></svg>
            </button>
        </div>
        <div class="graph-canvas" id="wfb-canvas"></div>
    </div>
</div>
{% endif %}
